website:
  metadata:
    display_name: Retsu.org
    base: https://retsu.org
    key: retsuorg
    languages: ["english"]
  match:
    - https://retsu\.org/manga/(?P<series>.*?)/(?:ch|chapter)-(?P<chapter>.*?)(?:[/?].*|)$
    - https://retsu\.org/manga/(?P<series>.*?)(?:[/?].*|)$
  series:
    cover:
      params:
        - series
      parsers:
        - type: request
          urls: 
            - /manga/{series}
          selectors:
            - type: css 
              query: .summary_image img
              output: single
              pipeline:
                - props:
                  - data-src
                  - src
    chapters:
      params:
        - series
      parsers:
        - type: request
          urls: 
            - /manga/{series}
          selectors:
            - type: css
              query: .wp-manga-chapter > a
              pipeline:
                - props:
                  - href
                - match:
                - props:
                  - chapter
  chapter:
    pages:
      params:
        - series
        - chapter
      parsers:
        - type: request
          urls:
            -  /manga/{series}/ch-{chapter:0>3}
            -  /manga/{series}/chapter-{chapter}
          selectors:
            - type: css
              query: .reading-content img
              pipeline:
                - props:
                    - data-src
                - replace:
                    - ["\t", '']
                    - ["\n", '']
        -
          type: network
          urls:
            -  /manga/{series}/ch-{chapter:03d}
            -  /manga/{series}/chapter-{chapter}
          filters:
            - url: https:\/\/rs\.jinbei\.my\.id\/manga_.*.jpg
  search:
    series:
      params:
        - query
      parsers:
        - type: request
          urls: 
            - /?s={query}&post_type=wp-manga
          selectors:
            - type: css
              query: .manga__item > .manga__content a
              pipeline:
                - props: 
                  - href
                - regex: https://retsu\.org/manga/(.*?)/